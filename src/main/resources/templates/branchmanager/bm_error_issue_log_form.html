<!DOCTYPE html>
<html xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{branchmanager/bm_layout/bm_default}">
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta charset="utf-8" />
<title>Error Issues Page</title>

<th:block layout:fragment="styles">
	<style>
.checked {
	color: gold;
}
</style>
</th:block>
</head>
<body>
	<div>
		<div layout:fragment="content">
			<div class="breadcrumbs ace-save-state" id="breadcrumbs">
				<ul class="breadcrumb">
					<li><i class="ace-icon fa fa-home home-icon"></i> <a href="#">Home</a>
					</li>
					<li><a href="#">Error/Issues/Log </a></li>
					<li class="active">Error Form</li>
				</ul>
				<!-- /.breadcrumb -->
			</div>
			<div class="page-header">
				<h1>
					<i class="ace-icon fa fa-cogs blue"></i> Error/Issues/Log Form
				</h1>
			</div>
			<!-- /.page-header -->
			<div class="page-content">
				<div class="row">
					<div th:if="${message}">
						<h2 class="alert alert-danger" th:text="${message}" />
					</div>
					<div class="col-xs-12">
						<form th:object="${errorIssueLog}" method="POST"
							autocomplete="off" id="validation-form" class="form-horizontal"
							th:action="@{/bm/errorissuelog}" data-toggle="validator" role="form">
							<div class="col-sm-6">
								<div class="form-group">
									<label class="control-label col-sm-5" for="date-timepicker1">Incident's
										Value Date <span class="red">*</span>:
									</label>
									<div class="col-sm-7">
										<input type="text" class="form-control date-timepicker"
											id="date-timepicker1" data-date-format="YYYY-MM-DD hh:mm:ss A"
											name="incidentValueDate" placeholder="Select date and time"
											required>
										<div class="help-block with-errors"></div>
									</div>
								</div>
								<div class="form-group">
									<label class="control-label col-sm-5" for="branchName-dropdown">Branch
										<span class="red">*</span>:
									</label>
									<div class="col-sm-7">
									<select class="chosen-select form-control" id="idBranchName" name="branchName"
		                                    data-placeholder="Choose Branch..." required>
		                                <option value=""></option>
		                                <option th:text="${branchVal}"
		                                        th:value="${branchVal}"
		                                        th:selected="${branchVal}"></option>
		                            </select>
									</div>
								</div>
								<div class="form-group">
									<label class="control-label col-sm-5" for="idDepartmentUnit">Department/Unit
										<span class="red">*</span>:
									</label>
									<div class="col-sm-7">
										<input type="text" class="form-control" id="idDepartmentUnit"
										style="text-transform: uppercase;" 
                                                onkeyup="this.value = this.value.toUpperCase();"
											name="departmentUnit" placeholder="Department/Unit" required>
										<div class="help-block with-errors"></div>
									</div>
								</div>
								<div class="form-group">
									<label class="control-label col-sm-5" for="idTrans">Transaction
										ID:</label>
									<div class="col-sm-7">
										<input type="text" class="form-control"
											pattern="[a-zA-Z0-9-+/ ]*" style="text-transform: uppercase;"
											onkeyup="this.value = this.value.toUpperCase();"
											placeholder="Enter Transaction ID" id="idTrans"
											name="transactionId">
									</div>
								</div>
								<div class="form-group">
									<label class="control-label col-sm-5" for="idAmount">Amount:</label>
									<div class="col-sm-7">
										<input class="form-control" id="idAmount" type="number"
											placeholder="0.00" min="0" step="any"
											pattern="^\d+(?:\.\d{1,2})?$" value="0.0"
											onblur="this.parentNode.parentNode.style.backgroundColor=/^\d+(?:\.\d{1,2})?$/.test(this.value)?'inherit':'#f28c0e14'"
											name="transactionAmount" />
									</div>
								</div>
								<div class="form-group">
									<label class="control-label col-sm-5" for="idTransAddedBy">Transaction
										Entered By:</label>
									<div class="col-sm-7">
										<input type="text" class="form-control" id="idTransAddedBy"
										style="text-transform: uppercase;" 
                                                onkeyup="this.value = this.value.toUpperCase();"
											name="trxnEnteredBy" placeholder="Transaction Entered By">
									</div>
								</div>
								<div class="form-group">
									<label class="control-label col-sm-5" for="idTransApprovedBy">Transaction
										Approved By:</label>
									<div class="col-sm-7">
										<input type="text" class="form-control" id="idTransApprovedBy"
										style="text-transform: uppercase;" 
                                                onkeyup="this.value = this.value.toUpperCase();"
											name="trxnApprovedBy" placeholder="Transaction Approved By">
									</div>
								</div>
								<div class="form-group">
									<label class="control-label col-sm-5" for="idNature">Nature
										of Error <span class="red">*</span>:
									</label>
									<div class="col-sm-7">
										<select class="chosen-select form-control" id="idNature"
											name="natureOfError"
											data-placeholder="Choose a nature of error..." required>
											<option value=""></option>
											<option value="Transaction Input Error">Transaction
												Input Error</option>
											<option value="System Error">System Error</option>
											<option value="Both (Transaction and System Error)">Both
												(Transaction and System Error)</option>
											<option value="Others">Others</option>
										</select>
										<div class="help-block with-errors"></div>
									</div>
								</div>
								<div class="form-group">
									<label class="control-label col-sm-5" for="idErrorDetail">Details
										of Error <span class="red">*</span>:
									</label>
									<div class="col-sm-7">
										<textarea name="errorDetail" placeholder="Description"
											required id="idErrorDetail" class="form-control"></textarea>
										<div class="help-block with-errors"></div>
									</div>
								</div>
								<div class="form-group">
									<label class="control-label col-sm-5" for="idReportedBy">Reported
										By <span class="red">*</span>:
									</label>
									<div class="col-sm-7">
										<input type="text" class="form-control" id="idReportedBy"
										style="text-transform: uppercase;" 
                                                onkeyup="this.value = this.value.toUpperCase();"
											name="reportedBy" placeholder="Reported By" required>
										<div class="help-block with-errors"></div>
									</div>
								</div>
							</div>
							<div class="col-sm-6">
								<div class="form-group">
									<label class="control-label col-sm-5" for="idCauseOfError">Cause
										of Error <span class="red">*</span>:
									</label>
									<div class="col-sm-7">
										<select class="chosen-select form-control" id="idCauseOfError"
											name="causeOfError"
											data-placeholder="Choose a cause of error..." required>
											<option value=""></option>
											<option value="Human Error">Human Error</option>
											<option value="Lack of Knowledge">Lack of Knowledge</option>
											<option value="Intentional">Intentional</option>
											<option value="Negligence">Negligence</option>
											<option value="Process Unclear">Process Unclear</option>
											<option value="System Error">System Error</option>
											<option value="Others">Others</option>
										</select>
										<div class="help-block with-errors"></div>
									</div>
								</div>
								<div class="form-group">
									<label class="control-label col-sm-5" for="idSteps">Necessary
										Steps to Address Error <span class="red">*</span>:
									</label>
									<div class="col-sm-7">
										<select class="chosen-select form-control" id="idSteps"
											name="stepsToAddressError"
											data-placeholder="Choose a necessary steps..." required>
											<option value=""></option>
											<option value="Reversal Entry">Reversal Entry</option>
											<option value="Adjustment Entry">Adjustment Entry</option>
											<option value="Rectification Entry">Rectification
												Entry</option>
											<option value="Others">Others</option>
										</select>
										<div class="help-block with-errors"></div>
									</div>
								</div>
								<div class="form-group">
									<label class="control-label col-sm-5" for="idErrorDetail">Brief
										Details of Resolutions /How to Fix Error? <span class="red">*</span>:
									</label>
									<div class="col-sm-7">
										<textarea name="resolutionDetail" placeholder="Description"
											required id="idErrorDetail" class="form-control"></textarea>
										<div class="help-block with-errors"></div>
									</div>
								</div>
								<div class="form-group">
									<label class="control-label col-sm-5" for="idApproveGivenBy">Approval
										Given By (For Resolution):</label>
									<div class="col-sm-7">
										<input type="text" class="form-control" id="idApproveGivenBy"
											name="resolutionApprovalGivenBy" disabled
											placeholder="Approval Given By">
									</div>
								</div>
								<div class="form-group">
									<label class="control-label col-sm-5" for="idProgressStauts">Progress
										Status of Issue <span class="red">*</span>:
									</label>
									<div class="col-sm-7">
										<select class="chosen-select form-control"
											id="idProgressStauts" name="progressStatus"
											data-placeholder="Choose a Progress Status..." required>
											<option value=""></option>
											<option value="Pending" selected>Pending</option>
											<option value="Resolved" disabled>Resolved</option>
										</select>
										<div class="help-block with-errors"></div>
									</div>
								</div>
								<div class="form-group" id="idResolvedDateOpt">
									<label class="control-label col-sm-5" for="idResolvedDate">Resolved
										Date <span class="red">*</span>:
									</label>
									<div class="col-sm-7">
										<input name="resolvedDate" id="idResolvedDate"
											data-date-format="YYYY-MM-DD hh:mm:ss A"
											placeholder="Select Issue Resolved Date" type="text"
											class="form-control date-timepicker" required>
										<div class="help-block with-errors"></div>
									</div>
								</div>
								<div class="form-group">
									<label class="control-label col-sm-5" for="idErrorLodgedBy"><span
										class="blue"> Error Lodged By </span> <span class="red">*</span>:
									</label>
									<div class="col-sm-7">
										<input name="errorLodgedBy" id="idErrorLodgedBy"
											class="form-control" th:value="${currentUser.email}"
											type="text" required readonly>
									</div>
								</div>
								<div class="form-group">
									<div class="col-sm-offset-5 col-sm-7">
										<button type="submit"
											class="btn btn-md btn-success no-border btn-round">Submit</button>
									</div>
								</div>
							</div>
						</form>
					</div>
				</div>
			</div>
		</div>
	</div>

	<!-- basic scripts -->
	<th:block layout:fragment="scripts">

		<script>
			$(function() {
				$('.date-timepicker').datetimepicker({
					"defaultDate" : new Date()
				});
			});
		</script>
		<script>
			autosize(document.querySelectorAll('textarea'));
		</script>

		<script>
			$(document).ready(function() {
				$('#idResolvedDateOpt').hide();
				$("#idProgressStauts").change(function() {
					showResolvedDateBox();
				});
			});

			function showResolvedDateBox() {
				let statusValue = $('#idProgressStauts').val();
				if (statusValue === 'Resolved') {
					$('#idResolvedDateOpt').show();
					$("[name='issueResolvedDate']").attr("required", true);
				} else {
					$('#idResolvedDateOpt').hide();
				}
			}
		</script>
		<script type="text/javascript">
			$('.chosen-select').chosen({
				width : "100%"
			});
		</script>
	</th:block>
</body>
</html>
