<!DOCTYPE html>
<html xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity4"
	layout:decorate="~{layouts/default}">
<head>
<meta charset="ISO-8859-1" />
<title>Dashboard</title>
<th:block layout:fragment="styles">
	<style type="text/css" media="print">
@page {
	size: auto; /* auto is the initial value */
	margin: 10mm 10mm 0mm 10mm;
	/* this affects the margin in the printer settings */
}


</style>
</th:block>

</head>

<body>
	<div layout:fragment="content">

		<div class="breadcrumbs ace-save-state" id="breadcrumbs">
			<ul class="breadcrumb">
				<li><i class="ace-icon fa fa-home home-icon"></i> <a href="#">Home</a>
				</li>

				<li><a href="/utilitylist">Utility List</a></li>
				<li class="active">Utility Expenses Detail Page</li>
			</ul>
		</div>
		<div class="page-content">

			<div th:if="${successMessage}">
				<div class="alert alert-success">
					<button type="button" class="close" data-dismiss="alert">
						<i class="ace-icon fa fa-times"></i>
					</button>
					<strong th:text="${successMessage}">Success!</strong> <br />
				</div>
			</div>

			<div th:if="${message}">
				<div class="alert alert-success">
					<button type="button" class="close" data-dismiss="alert">
						<i class="ace-icon fa fa-times"></i>
					</button>
					<strong th:text="${message}">Success!</strong> <br />
				</div>
			</div>
			<div class="row">
				<div class="col-sm-10 col-sm-offset-1">
					<div class="widget-box transparent">
						<div class="widget-header widget-header-large">
							<h3 class="widget-title grey lighter" id="titleHeader">
								<i class="ace-icon fa fa-bar-chart-o green"></i> Utility
								Expenses Detail
							</h3>
							<div class="widget-toolbar hidden-480">
								<button class="btn btn-app btn-pink btn-xs" id="btnPrint"
									title="Print Minute's Details!!!">
									<i class="ace-icon fa fa-print bigger-160"></i> Print
								</button>
								<a class="btn btn-app btn-success btn-xs" id="btnPrint"
									sec:authorize="hasAnyAuthority('ADMIN','HIGHSUPERVISOR', 'SUPERVISOR','BM','GAD')"
									title="Update Minute's Details!!!"
									th:href="@{/editutilitydata/{id}(id=${utilityValById.id})}">
									<i class="ace-icon fa fa-pencil-square-o bigger-160"></i>
									Update
								</a>
							</div>
						</div>
						<div class="widget-body">
							<div class="widget-main padding-24">
								<div class="row">
									<div class="col-sm-12">
										<div class="col-xs-5 col-sm-6">
											<ul class="list-unstyled spaced">
												<li><i class="ace-icon fa fa-caret-right blue"></i>Fiscal
													Year: <b class="blue"
													th:text="${utilityValById?.fiscalYear}"></b></li>

												<li><i class="ace-icon fa fa-caret-right blue"></i>Month:
													<b class="blue" th:text="${utilityValById?.month}"></b></li>
											</ul>
										</div>
										<div class="col-xs-7 col-sm-6">
											<ul class="list-unstyled  spaced">
												<li><i class="ace-icon fa fa-caret-right green"></i>Branch:
													<b class="blue" th:text="${branchValById?.branchName}"></b>
												</li>
												<li><i class="ace-icon fa fa-caret-right green"></i>Address:
													<b class="blue" th:text="${branchValById?.branchAddress}"></b></li>
												<li><i class="ace-icon fa fa-caret-right green"></i>Contact
													Number: <b class="blue"
													th:text="${branchValById?.branchPhone}"></b></li>
											</ul>
										</div>
									</div>
								</div>
								<div class="space"></div>
								<div>
									<table class="table table-striped table-bordered"
										id="datatable">
										<thead>
											<tr>
												<th class="center">S.N.</th>
												<th class="vertical-header-column">Expenses Category</th>
												<th class="vertical-header-column center">Amount (Rs.)</th>
												<th class="vertical-header-column center">Remarks</th>
											</tr>
										</thead>
										<tbody>
											<tr>
												<td width="5%" class="center">1</td>
												<th width="25%" class="vertical-header-column">Electricity
													Expenses</th>
												<td width="15%" class="center"
													th:text="${#numbers.formatDecimal(utilityValById?.electricityExpenseAmount, 1, 'COMMA', 2, 'POINT')}"></td>
												<td th:text="${utilityValById?.electricityExpenseRemarks}"></td>
											</tr>

											<tr>
												<td width="5%" class="center">2</td>
												<th width="25%" class="vertical-header-column">Fuel
													Expenses (Vehicle- 2 Wheeler)</th>
												<td width="15%" class="center"
													th:text="${#numbers.formatDecimal(utilityValById?.fuelExpensesTwoWheelAmount, 1, 'COMMA', 2, 'POINT')}"></td>
												<td th:text="${utilityValById?.fuelExpensesTwoWheelRemarks}"></td>
											</tr>

											<tr>
												<td width="5%" class="center">3</td>
												<th width="25%" class="vertical-header-column">Fuel
													Expenses (Vehicle-4 Wheeler)</th>
												<td width="15%" class="center"
													th:text="${#numbers.formatDecimal(utilityValById?.electricityExpenseAmount, 1, 'COMMA', 2, 'POINT')}"></td>
												<td
													th:text="${utilityValById?.fuelExpensesFourWheelRemarks}"></td>
											</tr>

											<tr>
												<td width="5%" class="center">4</td>
												<th width="25%" class="vertical-header-column">Fuel
													Expenses (Genset)</th>
												<td width="15%" class="center"
													th:text="${#numbers.formatDecimal(utilityValById?.fuelGensetAmount, 1, 'COMMA', 2, 'POINT')}"></td>
												<td th:text="${utilityValById?.fuelGensetRemarks}"></td>
											</tr>

											<tr>
												<td width="5%" class="center">5</td>
												<th width="25%" class="vertical-header-column">Telephone
													Expenses</th>
												<td width="15%" class="center"
													th:text="${#numbers.formatDecimal(utilityValById?.telephoneExpenseAmount, 1, 'COMMA', 2, 'POINT')}"></td>
												<td th:text="${utilityValById?.telephoneExpenseRemarks}"></td>
											</tr>

											<tr>
												<td width="5%" class="center">6</td>
												<th width="25%" class="vertical-header-column">Maintenance
													Expenses</th>
												<td width="15%" class="center"
													th:text="${#numbers.formatDecimal(utilityValById?.maintenanceExpenseAmount, 1, 'COMMA', 2, 'POINT')}"></td>
												<td th:text="${utilityValById?.maintenanceExpenseRemarks}"></td>
											</tr>

											<tr>
												<td width="5%" class="center">7</td>
												<th width="25%" class="vertical-header-column">Others
													Expenses</th>
												<td width="15%" class="center"
													th:text="${#numbers.formatDecimal(utilityValById?.othersExpensesAmount, 1, 'COMMA', 2, 'POINT')}"></td>
												<td th:text="${utilityValById?.othersExpensesRemarks}"></td>
											</tr>


										</tbody>

										<tfoot>
											<tr>
												<th colspan="2" class="vertical-header-column">
													<h4 class="pull-right">Total Amount (Rs.):</h4>
												</th>
												<th class="vertical-header-column center">
													<h4 class="center"
														th:text="${#numbers.formatDecimal(utilityValById?.totalExpense, 1, 'COMMA', 2, 'POINT')}"></h4>
												</th>
												<th></th>
											</tr>
											</foot>
									</table>
								</div>

								<div id="container" class="well"></div>
									<div class="space-12"></div>
								<div id="container1" class="well"></div>
								<div class="alert alert-info row"> 
									<div class="col-sm-6">
										<label for="idlodgedBy"> Lodged By: </label>
										<span id="idlodgedBy" class="bolder" th:text="${utilityValById?.lodgedBy}"></span>
									</div>
									<div class="col-sm-6" th:if="${utilityValById?.lodgedModifiedBy}">
										<label for="idlodgedModifiedBy"> Lodged Modified By: </label>
										<span id="idlodgedModifiedBy" class="bolder" th:text="${utilityValById?.lodgedModifiedBy}"></span>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</body>
<th:block layout:fragment="scripts">
	<script th:inline="javascript">
		$(document)
				.ready(
						function() {

							/*<![CDATA[*/
							var branchNameVal = /*[[${utilityValById.branchName}]]*/'branchName';
							var fiscalYearVal = /*[[${utilityValById.fiscalYear}]]*/'fiscalYear';
							var monthVal = /*[[${utilityValById.month}]]*/'month';

							var electricityExpenseAmountVal = /*[[${utilityValById.electricityExpenseAmount}]]*/'electricityExpenseAmount';
							var fuelExpensesTwoWheelAmountVal = /*[[${utilityValById.fuelExpensesTwoWheelAmount}]]*/'fuelExpensesTwoWheelAmount';
							var fuelExpensesFourWheelAmountVal = /*[[${utilityValById.fuelExpensesFourWheelAmount}]]*/'fuelExpensesFourWheelAmount';
							var fuelGensetAmountVal = /*[[${utilityValById.fuelGensetAmount}]]*/'fuelGensetAmount';
							var telephoneExpenseAmountVal = /*[[${utilityValById.telephoneExpenseAmount}]]*/'telephoneExpenseAmount';
							var maintenanceExpenseAmountVal = /*[[${utilityValById.maintenanceExpenseAmount}]]*/'maintenanceExpenseAmount';
							var othersExpensesAmountVal = /*[[${utilityValById.othersExpensesAmount}]]*/'othersExpensesAmount';
							/*]]>*/

							Highcharts
									.chart(
											'container',
											{
												chart : {
													plotBackgroundColor : null,
													plotBorderWidth : null,
													plotShadow : false,
													type : 'pie'
												},
												title : {
													text : 'Utility Expenses - Pie Chart'
												},
												subtitle : {
													text : 'Branch:'
															+ branchNameVal
															+ ',  Fiscal Year:'
															+ fiscalYearVal
															+ ',  Month:'
															+ monthVal
												},
												tooltip : {
													pointFormat : '{series.name}: <b>{point.y:.2f}</b>'
												},
												accessibility : {
													point : {
														valueSuffix : '%'
													}
												},
												plotOptions : {
													pie : {
														allowPointSelect : true,
														cursor : 'pointer',
														dataLabels : {
															enabled : true,
															format : '<b>{point.name}</b>: {point.percentage:.2f} %'
														}
													}
												},
												credits : {
													enabled : false
												},
												series : [ {
													name : 'Amount (Rs.)',
													colorByPoint : true,
													data : [
															{
																name : 'Electricity Expense',
																y : electricityExpenseAmountVal
															},
															{
																name : 'Fuel Expenses (Vehicle- 2 Wheeler)',
																y : fuelExpensesTwoWheelAmountVal,
																sliced : true,
																selected : true
															},
															{
																name : 'Fuel Expenses (Vehicle- 4 Wheeler)',
																y : fuelExpensesFourWheelAmountVal
															},
															{
																name : 'Fuel Expenses (Genset)',
																y : fuelGensetAmountVal
															},
															{
																name : 'Telephone Expenses',
																y : telephoneExpenseAmountVal
															},
															{
																name : 'Maintenance Expenses',
																y : maintenanceExpenseAmountVal
															},
															{
																name : 'Others Expenses',
																y : othersExpensesAmountVal
															} ]
												} ]
											});

							Highcharts
									.chart(
											'container1',
											{
												chart : {
													type : 'column'
												},
												title : {
													text : 'Utility Expenses - Bar Chart'
												},
												subtitle : {
													text : 'Branch:'
															+ branchNameVal
															+ ',  Fiscal Year:'
															+ fiscalYearVal
															+ ',  Month:'
															+ monthVal
												},
												accessibility : {
													announceNewData : {
														enabled : true
													}
												},
												xAxis : {
													type : 'category'
												},
												yAxis : {
													title : {
														text : 'Total Utility Expenses'
													}

												},
												credits : {
													enabled : false
												},
												legend : {
													enabled : false,

												},
												plotOptions : {
													series : {
														borderWidth : 0,
														dataLabels : {
															enabled : true,
															format : '{point.y:.2f}'
														}
													}
												},

												tooltip : {
													headerFormat : '<span style="font-size:11px">{series.name}</span><br>',
													pointFormat : '<span style="color:{point.color}">{point.name}</span>: <b>Rs. {point.y:.2f}</b><br/>'
												},

												series : [ {
													name : 'Utility Category',
													colorByPoint : true,
													data : [
															{
																name : 'Electricity Expenses',
																y : electricityExpenseAmountVal
															},
															{
																name : 'Fuel Expenses (Vehicle- 2 Wheeler)',
																y : fuelExpensesTwoWheelAmountVal
															},
															{
																name : 'Fuel Expenses (Vehicle- 4 Wheeler)',
																y : fuelExpensesFourWheelAmountVal
															},
															{
																name : 'Fuel Expenses (Genset)',
																y : fuelGensetAmountVal
															},
															{
																name : 'Telephone Expenses',
																y : telephoneExpenseAmountVal
															},
															{
																name : 'Maintenance Expenses',
																y : maintenanceExpenseAmountVal
															},
															{
																name : 'Others Expenses',
																y : othersExpensesAmountVal
															} ]
												} ]

											});

						});
	</script>

	<script>
		
	</script>


	<script>
		$('#btnPrint').on("click", function() {
			$('#titleHeader,.widget-body').printThis({
				importCSS : true,
				importStyle : true,
				loadCSS : "/css/bootstrap.min.css"
			});
		});
	</script>


</th:block>
</html>