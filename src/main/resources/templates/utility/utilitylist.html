<!DOCTYPE html>
<html xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layouts/default}">
<head>
<meta charset="ISO-8859-1" />
<title>Utility Reports</title>

<th:block layout:fragment="styles">
	<style type="text/css">
td.details-control {
	text-align: center;
	color: forestgreen;
	cursor: pointer;
}
td.highlight { font-weight: bold; color: black; font-size: 14px;}
tr.shown td.details-control {
	text-align: center;
	color: red;
}

.highcharts-figure, .highcharts-data-table table {
    min-width: 310px; 
    max-width: 800px;
    margin: 1em auto;
}


</style>
</th:block>

</head>
<body>
	<div layout:fragment="content">
		<div class="breadcrumbs ace-save-state" id="breadcrumbs">
			<ul class="breadcrumb">
				<li><i class="ace-icon fa fa-home home-icon"></i> <a href="#">Home</a>
				</li>
				<li><a href="#">Utility Expenses</a></li>
				<li class="active">Utility Reports</li>
			</ul>
		</div>
		<div class="page-content">
			<div class="row">
				<div class="col-xs-12">
					<div th:if="${message}">
						<h2 class="alert alert-danger" th:text="${message}" />
					</div>
					<div th:if="${successMessage}">
						<div class="alert alert-success">
							<button type="button" class="close" data-dismiss="alert">
								<i class="ace-icon fa fa-times"></i>
							</button>
							<strong th:text="${successMessage}">Success!</strong> <br />
						</div>
					</div>
				</div>
			</div>
			<div class="row">
				<div class="col-xs-12 col-sm-12">
					<div class="col-xs-12 col-sm-6">
						<div class="search-area well well-sm">
							<div class="search-filter-header bg-primary">
								<h5 class="smaller no-margin-bottom">
									<i class="ace-icon fa fa-sliders light-green bigger-130"></i>&nbsp;
									Refine your search by <span class="bolder">Month</span>
								</h5>
							</div>
							<div class="space-10"></div>
							<form method="POST" data-toggle="validator" role="form"
								class="form-inline" id="myForm">
								<div class="input-group col-xs-6 col-sm-4">
									<select class="fiscalYear-dropdown input-large"
										name="fiscalYear" id="idFiscalYearValue" required></select>
									<div class="help-block with-errors"></div>
								</div>
								<div class="input-group">
									<select class="chosen-select form-control" name="month"
										id="monthvalue" data-placeholder="Choose a Month..." required>
										<option value=""></option>
										<option value="Shrawan">Shrawan</option>
										<option value="Bhadra">Bhadra</option>
										<option value="Ashoj">Ashoj</option>
										<option value="Kartik">Kartik</option>
										<option value="Mangsir">Mangsir</option>
										<option value="Poush">Poush</option>
										<option value="Magh">Magh</option>
										<option value="Falgun">Falgun</option>
										<option value="Chaitra">Chaitra</option>
										<option value="Baishak">Baishak</option>
										<option value="Jestha">Jestha</option>
										<option value="Asar">Asar</option>
									</select>
									<div class="help-block with-errors"></div>
								</div>
								<div class="form-group">
									<button type="submit" id="submitForm"
										class="btn btn-purple btn-round btn-sm">
										<i class="ace-icon fa fa-search bigger-110"></i>Search
									</button>
									<div class="help-block with-errors"></div>
								</div>
								<br /> <span id="confirmMessage" class="confirmMessage"></span>
							</form>
						</div>
					</div>
					<div class="col-xs-12 col-sm-6">
						<div class="search-area well well-sm">
							<div class="search-filter-header bg-primary">
								<h5 class="smaller no-margin-bottom">
									<i class="ace-icon fa fa-sliders light-green bigger-130"></i>&nbsp;
									Refine your search by <span class="bolder">Branch</span>
								</h5>
							</div>
							<div class="space-10"></div>
								<form method="POST" data-toggle="validator" role="form"
									id="idFormByBranch" class="form-inline">
									<div class="input-group  col-sm-4">
										<select
											class="fiscalYear-dropdown form-control col-xs-6 col-sm-3"
											id="idFiscalYear2" name="fiscalYear" required></select>
										<div class="help-block with-errors"></div>
									</div>
									<div class="input-group  col-sm-4">
										<select class="form-control col-xs-6 col-sm-4"
											id="branchName-dropdown" name="branchName" required></select>
										<div class="help-block with-errors"></div>
									</div>
									<div class="form-group">
										<button type="submit" id="submitForm2"
											class="btn btn-purple btn-round btn-sm">
											<i class="ace-icon fa fa-search bigger-110"></i>Search
										</button>
										<div class="help-block with-errors"></div>
									</div>
									<br /> <span id="confirmMessage2" class="confirmMessage"></span>
								</form>
						</div>
					</div>
				</div>
			</div>

			<div class="row">
				<div class="col-xs-12">
					<!-- PAGE CONTENT BEGINS -->
					<div class="table-responsive">
						<div class="table-header">Utility Report &nbsp;&nbsp;<span id="fiscalValueShow"></span> &nbsp;&nbsp; <span id="monthValueShow"></span> </div>
						<table id="dynamic-table" width="100%"
							class="table table-striped table-bordered table-hover">
							<thead>
								<tr>
									<th width="3%"></th>
									<th width="8%">Fiscal Year</th>
									<th width="11%">Branch</th>
									<th width="7%">Month</th>
									<th width="8%">Electricity</th>
									<th width="9%">Fuel (Vehicle- 2 Wheeler)</th>
									<th width="9%">Fuel (Vehicle-4 Wheeler)</th>
									<th width="9%">Fuel (Genset)</th>
									<th width="9%">Telephone</th>
									<th width="9%">Maintenance</th>
									<th width="8%">Others Expenses</th>
									<th class="center info" width="10%"><strong>Total (Rs.)</strong></th>
								</tr>
							</thead>
							<tfoot>
					            <tr>
						            <th></th>
						            <th></th>
						            <th></th>
					                <th style="text-align:right">Total (Rs.):</th>
					                <th></th>
					                <th></th>
					                <th></th>
					                <th></th>
					                <th></th>
					                <th></th>
					                <th></th>
					                <th></th>
					            </tr>
					        </tfoot>
						</table>
					</div>
				</div>
			</div>
			<div class="row barChart">
				<div id="container1"></div>
			</div>
		</div>
	</div>
	<!-- /.main-content -->
	<th:block layout:fragment="scripts">
		<script>
			$(document)
					.ready(
							function() {
								$("#submitForm")
										.click(
												function(e) {
													e.preventDefault();
													var message = document
															.getElementById('confirmMessage');
													var badColor = "#ff6666";
													var fiscal = $('#idFiscalYearValue');
													var month = $('#monthvalue');
													if (typeof (fiscal.val()) == 'undefined'
															|| fiscal.val() === null) {
														message.style.color = badColor;
														message.innerHTML = "*Please choose Fiscal Year"
														return false;
													} else if (typeof (month.val()) == 'undefined'
															|| month.val() === "" || month.val() === null) {
														message.style.color = badColor;
														message.innerHTML = "*Please choose Month"
														return false;
													} else{
														$('#confirmMessage').empty();
														ajaxgetUtilityByFiscalAndMonth();
													}
												});
								$("#submitForm2")
										.click(
												function(e) {
													e.preventDefault();
													var message2 = document
															.getElementById('confirmMessage2');
													var badColor = "#ff6666";
													var fiscal2 = $('#idFiscalYear2');
													var branch = $('#branchName-dropdown');
													if (typeof (fiscal2.val()) == 'undefined'
															|| fiscal2.val() === null) {
														message2.style.color = badColor;
														message2.innerHTML = "*Please choose Fiscal Year"
														return false;
													} else if (typeof (branch
															.val()) == 'undefined'
															|| branch.val() === null) {
														message2.style.color = badColor;
														message2.innerHTML = "*Please choose Branch"
														return false;
													} else{
														$('#confirmMessage2').empty();
														ajaxgetUtilityByFiscalAndBranch();
													}
												});
							});
		</script>

		<script>
			$(document).ready(function() {
				ajaxGetCustLocker();
			});

			function ajaxGetCustLocker() {
				const url = '/getutility/all';
				$.getJSON(url, function(data) {
					createDataTable(data);
				});
			}

			function ajaxgetUtilityByFiscalAndMonth() {
				let fiscalYearVal = $('#idFiscalYearValue').val();
				let monthVal = $('#monthvalue').val();
				
				$("#fiscalValueShow").html(': &nbsp;'+ fiscalYearVal);
				$("#monthValueShow").html(': &nbsp;'+ monthVal);
				const url = '/getutility/months/' + fiscalYearVal + '/'+ monthVal;
				$.getJSON(url, function(data) {
					createDataTable(data);
				});
			}

			function ajaxgetUtilityByFiscalAndBranch() {
				let fiscalYearVal = $('#idFiscalYear2').val();
				let branchVal = $('#branchName-dropdown').val();
				
				$("#fiscalValueShow").html(': &nbsp;'+ fiscalYearVal);
				$("#monthValueShow").html(': &nbsp;'+ branchVal);
				const url = '/getutility/branch/' + branchVal + '/' + fiscalYearVal;
				$.getJSON(url, function(data) {
					createDataTable(data);
				});
			}


			function createDataTable(data) {
				var table = $('#dynamic-table')
						.DataTable(
								{
									"createdRow" : function(row, data, index) {
										$('td', row).eq(10).addClass('highlight');
								},
								
								
								"footerCallback": function ( row, data, start, end, display ) {
						            var api = this.api(), data;
									 
						         // converting to interger to find total
						            var intVal = function ( i ) {
						                return typeof i === 'string' ?
						                    i.replace(/[\$,]/g, '')*1 :
						                    typeof i === 'number' ?
						                        i : 0;
						            };
						 
						            // computing column Total of the complete result 
							    var electricityExpense = api
						                .column( 4 )
						                .data()
						                .reduce( function (a, b) {
						                    return intVal(a) + intVal(b);
						                }, 0 );
										
						            var fuelExpensesTwoWheel = api
						                .column( 5 )
						                .data()
						                .reduce( function (a, b) {
						                    return intVal(a) + intVal(b);
						                }, 0 );
										
							     var fuelExpensesFourWheel = api
						                .column( 6 )
						                .data()
						                .reduce( function (a, b) {
						                    return intVal(a) + intVal(b);
						                }, 0 );
										
							     var fuelGenset = api
						                .column( 7 )
						                .data()
						                .reduce( function (a, b) {
						                    return intVal(a) + intVal(b);
						                }, 0 );
							     var telephoneExpense = api
						                .column( 8 )
						                .data()
						                .reduce( function (a, b) {
						                    return intVal(a) + intVal(b);
						                }, 0 );
							     var maintenanceExpense = api
						                .column( 9 )
						                .data()
						                .reduce( function (a, b) {
						                    return intVal(a) + intVal(b);
						                }, 0 );
							     var othersExpenses = api
						                .column( 10 )
						                .data()
						                .reduce( function (a, b) {
						                    return intVal(a) + intVal(b);
						                }, 0 );
							     var totalExpenses = api
						                .column( 11 )
						                .data()
						                .reduce( function (a, b) {
						                    return intVal(a) + intVal(b);
						                }, 0 );
									
							     
							  // Total over this page
						            var pageTotal_electricityExpense = api
						                .column( 4, { page: 'current'} )
						                .data()
						                .reduce( function (a, b) {
						                    return intVal(a) + intVal(b);
						                }, 0 );
						            var pageTotal_fuelExpensesTwoWheel = api
						                .column( 5, { page: 'current'} )
						                .data()
						                .reduce( function (a, b) {
						                    return intVal(a) + intVal(b);
						                }, 0 );
						            var pageTotal_fuelExpensesFourWheel = api
						                .column( 6, { page: 'current'} )
						                .data()
						                .reduce( function (a, b) {
						                    return intVal(a) + intVal(b);
						                }, 0 );
						            var pageTotal_fuelGenset = api
						                .column( 7, { page: 'current'} )
						                .data()
						                .reduce( function (a, b) {
						                    return intVal(a) + intVal(b);
						                }, 0 );
						            var pageTotal_telephoneExpense = api
						                .column( 8, { page: 'current'} )
						                .data()
						                .reduce( function (a, b) {
						                    return intVal(a) + intVal(b);
						                }, 0 );
						            var pageTotal_maintenanceExpense = api
						                .column( 9, { page: 'current'} )
						                .data()
						                .reduce( function (a, b) {
						                    return intVal(a) + intVal(b);
						                }, 0 );
						            var pageTotal_othersExpenses = api
						                .column( 10, { page: 'current'} )
						                .data()
						                .reduce( function (a, b) {
						                    return intVal(a) + intVal(b);
						                }, 0 );
						            var pageTotal_totalExpenses = api
						                .column( 11, { page: 'current'} )
						                .data()
						                .reduce( function (a, b) {
						                    return intVal(a) + intVal(b);
						                }, 0 );
										
						            // Update footer by showing the total with the reference of the column index 
						            $( api.column( 4 ).footer() ).html(pageTotal_electricityExpense +' ('+ electricityExpense +' total)');
						            $( api.column( 5 ).footer() ).html(pageTotal_fuelExpensesTwoWheel +' ('+ fuelExpensesTwoWheel +' total)');
						            $( api.column( 6 ).footer() ).html(pageTotal_fuelExpensesFourWheel +' ('+ fuelExpensesFourWheel +' total)');
						            $( api.column( 7 ).footer() ).html(pageTotal_fuelGenset +' ('+ fuelGenset +' total)');
						            $( api.column( 8 ).footer() ).html(pageTotal_telephoneExpense +' ('+ telephoneExpense +' total)');
						            $( api.column( 9 ).footer() ).html(pageTotal_maintenanceExpense +' ('+ maintenanceExpense +' total)');
						            $( api.column( 10 ).footer() ).html(pageTotal_othersExpenses +' ('+ othersExpenses +' total)');
						            $( api.column( 11 ).footer() ).html(pageTotal_totalExpenses +' ('+ totalExpenses +' total)');
						            
						            var show = Highcharts.chart('container1', {
						                chart: {
						                    type: 'column',
						                },
						                title: {
						                    text: 'Utility Report ' 
						                },
						                subtitle: {
						                    text: 'Pokhara Finance Ltd.'
						                },
						                accessibility: {
						                    announceNewData: {
						                        enabled: true
						                    }
						                },
						                xAxis: {
						                    type: 'category'
						                    
						                },
						                yAxis: {
						                    title: {
						                        text: 'Total amount (Rs.)'
						                    }

						                },
						                legend: {
						                    enabled: false
						                },
						                plotOptions: {
						                    series: {
						                        borderWidth: 0,
						                        dataLabels: {
						                            enabled: true,
						                            format: '{point.y:.2f}'
						                        }
						                    }
						                },
						                credits: {
						   			        enabled: false
						   			    },
						                tooltip: {
						                    headerFormat: '<span style="font-size:11px">{series.name}</span><br>',
						                    pointFormat: '<span style="color:{point.color}">{point.name}</span>: <b>Rs. {point.y:.2f}</b><br/>'
						                },

						                series: [
						                    {
						                        name: "Expense category:",
						                        colorByPoint: true,
						                        data: [
						                            {
						                                name: "Electricity",
						                                y: electricityExpense
						                                
						                            },
						                            {
						                                name: "Fuel Expenses (Vehicle-2 Wheeler)",
						                                y: fuelExpensesTwoWheel
						                            },
						                            {
						                                name: "Fuel Expenses (Vehicle-4 Wheeler)",
						                                y: fuelExpensesFourWheel
						                            },
						                            {
						                                name: "Fuel Expenses (Genset)",
						                                y: fuelGenset
						                            },
						                            {
						                                name: "Telephone Expenses",
						                                y: telephoneExpense
						                            },
						                            {
						                                name: "Maintenance Expenses",
						                                y: maintenanceExpense
						                            },
						                            {
						                                name: "Others Expenses",
						                                y: othersExpenses
						                            }
						                        ]
						                    }
						                ]

						            });
						            
						        },
						        
						        
						        
									"order" : [ 1, "desc" ],
									destroy : true,
									"data" : data,
									select : "single",
									"columns" : [

											{
												"className" : 'details-control',
												"orderable" : false,
												"data" : null,
												"defaultContent" : '',
												"render" : function() {
													return '<i class="ace-icon fa fa-angle-double-down fa-2x" title="Show details" aria-hidden="true"></i>';
												},
												width : "15px"
											},
											{
												"data" : "fiscalYear"
											},
											{
												"data" : "branchName",
												"render" : function(data, type,
														row, meta) { // render event defines the markup of the cell text 
													var a = '<a href="utility/detailpage/' + row["id"]+ '"> '
															+ row.branchName
															+ '</a>'; // row object contains the row data
													return a;
												}
											},
											{
												"data" : "month"
											},
											{
												"data" : "electricityExpenseAmount",
												render : function(data, type,
														row) {
													return currency(row.electricityExpenseAmount, {useVedic: true, decimal: '.', precision: 2}).format();
												}
											},
											{
												"data" : "fuelExpensesTwoWheelAmount",
												render : function(data, type,
														row) {
													return currency(row.fuelExpensesTwoWheelAmount, {useVedic: true, decimal: '.', precision: 2}).format();
												}
											},
											{
												"data" : "fuelExpensesFourWheelAmount",
												render : function(data, type,
														row) {
													return currency(row.fuelExpensesFourWheelAmount, {useVedic: true, decimal: '.', precision: 2}).format();
												}
											},
											{
												"data" : "fuelGensetAmount",
												render : function(data, type,
														row) {
													return currency(row.fuelGensetAmount, {useVedic: true, decimal: '.', precision: 2}).format();
												}
											},
											{
												"data" : "telephoneExpenseAmount",
												render : function(data, type,
														row) {
													return currency(row.telephoneExpenseAmount, {useVedic: true, decimal: '.', precision: 2}).format();
												}
											},
											{
												"data" : "maintenanceExpenseAmount",
												render : function(data, type,
														row) {
													return currency(row.maintenanceExpenseAmount, {useVedic: true, decimal: '.', precision: 2}).format();
												}
											},
											{
												"data" : "othersExpensesAmount",
												render : function(data, type,
														row) {
													return currency(row.othersExpensesAmount, {useVedic: true, decimal: '.', precision: 2}).format();
												}
											},
											{
												"data" : "totalExpense",
												"render" : function(data, type,
														row, meta) {
													return currency(row.totalExpense, {useVedic: true, decimal: '.', precision: 2}).format();
												}
											},

									],
									dom : 'Blfrtip',
									buttons : [
											{
												"extend" : "copy",
												"text" : "<i class='fa fa-copy bigger-110 pink'></i> <span class='hidden'>Copy to clipboard</span>",
												"className" : "btn btn-white btn-primary btn-bold"
											},
											{
												"extend" : "csv",
												"text" : "<i class='fa fa-file-excel-o bigger-110 blue'></i> <span class='hidden'>Export to CSV</span>",
												"className" : "btn btn-white btn-primary btn-bold"
											},
											{
												"extend" : "excel",
												"text" : "<i class='fa fa-file-excel-o bigger-110 green'></i> <span class='hidden'>Export to Excel</span>",
												"className" : "btn btn-white btn-primary btn-bold",
												"exportOptions" : {
													modifier : {
														page : 'all'
													}
												}
											},
											{
												"extend" : "pdf",
												"text" : "<i class='fa fa-file-pdf-o bigger-110 red'></i> <span class='hidden'>Export to PDF</span>",
												"className" : "btn btn-white btn-primary btn-bold",
												"exportOptions" : {
													modifier : {
														page : 'all'
													}
												}
											},
											{
												"extend" : "print",
												"text" : "<i class='fa fa-print bigger-110 grey'></i> <span class='hidden'>Print</span>",
												"className" : "btn btn-white btn-primary btn-bold",
												autoPrint : true,
												orientation : 'landscape',
												title : "Utility Expenses Details"
											} ]

								});

				// Add event listener for opening and closing details
				$('#dynamic-table tbody').on(
						'click',
						'td.details-control',
						function() {
							var tr = $(this).closest('tr');
							var tdi = tr.find("i.fa");
							var row = table.row(tr);

							if (row.child.isShown()) {
								// This row is already open - close it
								row.child.hide();
								tr.removeClass('shown');
								tdi.first().removeClass(
										'fa fa-angle-double-up fa-2x');
								tdi.first().addClass(
										'fa fa-angle-double-down fa-2x');
							} else {
								// Open this row
								row.child(format(row.data())).show();
								tr.addClass('shown');
								tdi.first().removeClass(
										'fa fa-angle-double-down fa-2x');
								tdi.first().addClass(
										'fa fa-angle-double-up fa-2x');
							}
						});

				table.on("user-select", function(e, dt, type, cell,
						originalEvent) {
					if ($(cell.node()).hasClass("details-control")) {
						e.preventDefault();
					}
				});

				function format(d) {
					// `d` is the original data object for the row
					return '<table class="table table-striped table-bordered table-hover">'
					+ '<tr>' + '<th width="25%" class="center green">'
					+ d.branchName
					+ '&nbsp;('
					+ d.fiscalYear
					+ ')'
					+ '&nbsp;'
					+ d.month
					+ '</th>'
					+ '<th width="20%" class="center">Amount (Rs.)</th>'
					+ '<th width="55%" class="center">Remarks</th>'

					+ '</tr>'
							+ '<tr>'
							+ '<td ><strong>Electricity Expenses : </strong></td>'
							+ '<td>'
							+ currency(d.electricityExpenseAmount, {useVedic: true, decimal: '.',symbol: 'Rs. ', formatWithSymbol: true, precision: 2}).format()
							+ '</td>'
							+ '<td>'
							+ d.electricityExpenseRemarks
							+ '</td>'
							+ '</tr>'
							
							+ '<tr>'
							+ '<td ><strong>Fuel Expenses (Vehicle- 2 Wheeler) : </strong></td>'
							+ '<td>'
							+ currency(d.fuelExpensesTwoWheelAmount, {useVedic: true, decimal: '.',symbol: 'Rs. ', formatWithSymbol: true, precision: 2}).format()
							+ '</td>'
							+ '<td>'
							+ d.fuelExpensesTwoWheelRemarks
							+ '</td>'
							+ '</tr>'
							
							+ '<tr>'
							+ '<td ><strong>Fuel Expenses (Vehicle-4 Wheeler) : </strong></td>'
							+ '<td>'
							+ currency(d.fuelExpensesFourWheelAmount, {useVedic: true, decimal: '.',symbol: 'Rs. ', formatWithSymbol: true, precision: 2}).format()
							+ '</td>'
							+ '<td>'
							+ d.fuelExpensesFourWheelRemarks
							+ '</td>'
							+ '</tr>'
							
							+ '<tr>'
							+ '<td ><strong>Fuel Expenses (Genset) : </strong></td>'
							+ '<td>'
							+ currency(d.fuelGensetAmount, {useVedic: true, decimal: '.',symbol: 'Rs. ', formatWithSymbol: true, precision: 2}).format()
							+ '</td>'
							+ '<td>'
							+ d.fuelGensetRemarks
							+ '</td>'
							+ '</tr>'
							
							+ '<tr>'
							+ '<td ><strong>Telephone Expenses : </strong></td>'
							+ '<td>'
							+ currency(d.telephoneExpenseAmount, {useVedic: true, decimal: '.',symbol: 'Rs. ', formatWithSymbol: true, precision: 2}).format()
							+ '</td>'
							+ '<td>'
							+ d.telephoneExpenseRemarks
							+ '</td>'
							+ '</tr>'
							
							+ '<tr>'
							+ '<td ><strong>Maintenance Expenses : </strong></td>'
							+ '<td>'
							+ currency(d.maintenanceExpenseAmount, {useVedic: true, decimal: '.',symbol: 'Rs. ', formatWithSymbol: true, precision: 2}).format()
							+ '</td>'
							+ '<td>'
							+ d.maintenanceExpenseRemarks
							+ '</td>'
							+ '</tr>'
							
							+ '<tr>'
							+ '<td ><strong>Others Expenses : </strong></td>'
							+ '<td>'
							+ currency(d.othersExpensesAmount, {useVedic: true, decimal: '.',symbol: 'Rs. ', formatWithSymbol: true, precision: 2}).format()
							+ '</td>'
							+ '<td>'
							+ d.othersExpensesRemarks
							+ '</td>'
							+ '</tr>'
							
							+ '<tr>'
							+ '<td><h5><strong> Total Expenses: </strong></h5></td>'
							+ '<td><h5><strong>'
							+  currency(d.totalExpense, {useVedic: true, decimal: '.',symbol: 'Rs. ', formatWithSymbol: true, precision: 2 }).format()
							+ '</strong></h5></td>' + '<td></td></tr>' + '</table>';
				}
			}
		</script>



		<script type="text/javascript">
			$('.chosen-select').chosen();
			$(window).off('resize.chosen').on('resize.chosen', function() {
				$('.chosen-select').each(function() {
					var $this = $(this);
					$this.next().css({
						'width' : "220px"
					});
				})
			}).trigger('resize.chosen');
		</script>

	</th:block>
</body>
</html>