<!DOCTYPE html>
<html xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" xmlns:th="http://www.w3.org/1999/xhtml"
	  layout:decorate="~{layouts/default}">
<head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta charset="utf-8" />
    <title> Minutes Page</title>
    <th:block layout:fragment="styles">
        
    </th:block>
</head>
<body>
    <div layout:fragment="content">
		<div class="breadcrumbs ace-save-state" id="breadcrumbs">
			<ul class="breadcrumb">
				<li>
					<i class="ace-icon fa fa-home home-icon"></i>
					<a href="#">Home</a>
				</li>
				<li>
					<a href="#">Minutes</a>
				</li>
				<li class="active">Minute's Form</li>
			</ul><!-- /.breadcrumb -->						
		</div> 
		
		<div class="page-content">
			<div class="row">
				<div class="col-xs-12">
					<!-- PAGE CONTENT BEGINS -->
					<div th:if="${message}">
						<h2 class="alert alert-danger" th:text="${message}" />
					</div>
					<div th:if="${successMessage}">
						<div class="alert alert-success">
							<button type="button" class="close" data-dismiss="alert">
								<i class="ace-icon fa fa-times"></i>
							</button>
							<strong th:text="${successMessage}">Success!</strong> <br />
						</div>
					</div>
				</div>
			</div>
			<div class="page-header">
				<h1>
					<i class="ace-icon fa fa-book"></i> Update Meeting Minute's Form
				</h1>
			</div>
			<!-- /.page-header -->
			<div class="row">
				<div class="col-xs-12">
							<form method="POST" enctype="multipart/form-data" th:object="${minutes}"  modelAttribute="minutes" autocomplete="off"
							th:action="@{/files/updateminute}" class="form-horizontal" data-toggle="validator" role="form">
							<input type="hidden" th:value="${minutesDetailVal?.id}" name="id"/>
							<input type="hidden" name="fileLocationUrl" th:value="${minutesDetailVal?.fileLocationUrl}"/>
							
							
								<div class="col-sm-6 col-sm-offset-2 form-actions">
									<div class="form-group">
										<label class="col-sm-4 control-label no-padding-right"
											for="idMinuteTitle"> Title <span class="red">*</span>: </label>
										<div class="col-sm-8">
											<input name="minuteTitle" id="idMinuteTitle" th:value="${minutesDetailVal?.minuteTitle}"
												placeholder="Minute Title" type="text"
												class="col-xs-10 col-sm-12" required/>
												<div class="help-block with-errors"></div>
										</div>
									</div>
									<div class="form-group">
										<label class="col-sm-4 control-label no-padding-right" for="date-timepicker1"> Meeting's Date <span class="red">*</span>: </label>
										<div class="col-sm-8">
										<input id="date-timepicker1" type="text" name="meetingsDate" class="col-xs-10 col-sm-12" 
										th:value="${{minutesDetailVal?.meetingsDate}}"
												data-date-format="yyyy-mm-dd" placeholder="Select Meetings Date" required/>
											<div class="help-block with-errors"></div>
										</div>
									</div>									
									<div class="form-group">
										<label class="col-sm-4 control-label no-padding-right"
											for="idCategory"> Category <span class="red">*</span>: </label>
										<div class="col-sm-8">
											<select class="chosen-select col-xs-10 col-sm-12"
												id="idCategory" name="category"
												data-placeholder="Choose a Category..." required>
												<option value=""></option>
												<option value="Management_HOD"> Management/HOD </option>
												<option value="Business_Operation"> Business/Operation </option>
												<option value="Branch"> Branch </option>
												<option value="Others"> Others </option>
											</select>
										</div>
									</div>									
									<div class="form-group">
									<label class="col-sm-4 control-label no-padding-right" for="branchName-dropdown"> Issued Branch <span class="red">*</span>: </label>
										<div class="col-sm-8">
											 <select class="chosen-select col-xs-10 col-sm-12" data-placeholder="Choose Branch..." id="idBranchName" name="branchName" required>
			                                    <option th:each="branch : ${branchNameVal}"
				                                        th:value="${branch?.branchName}"
				                                        th:text="${branch?.branchName}"></option>
			                                </select> 
											<span class="help-inline col-xs-12 col-sm-7">
											</span>
										</div>
									</div>																	
			                        <div class="form-group">
			                            <label class="col-sm-4 control-label no-padding-right" for="idFiscalYear"> Fiscal Year <span class="red">*</span>:</label>
			                            <div class="col-sm-8">
			                                <select class="chosen-select col-xs-10 col-sm-12" data-placeholder="Choose Fiscal Year..." id="idFiscalYear" name="fiscalYear" required>
			                                    <option th:each="year : ${fiscalYears}"
				                                        th:value="${year.fiscalYears}"
				                                        th:text="${year.fiscalYears}"></option>
			                                </select> 
			                            </div>
			                        </div>
			                        
			                        <div class="form-group">
			                        <label class="col-sm-4 control-label no-padding-right" for="customFile"> Upload Minutes Document  <span class="red">* (This will replace the previous file!!!)</span>: </label>
										<div class="col-sm-8">
											<input type="file" name="file" accept=".txt,.doc,.docx,.pdf,image/png, image/jpeg" 
												id="customFile"/>
											<div class="help-block with-errors"></div>
										</div>
									</div>
														
									<div class="form-group">
										<label class="col-sm-4 control-label no-padding-right"
											for="idRemarks"> Remarks: </label>
										<div class="col-sm-8">
											<textarea name="remarks" placeholder="Description" th:value="${{minutesDetailVal?.remarks}}"
											th:text="${{minutesDetailVal?.remarks}}"
												id="idRemarks" class="col-xs-10 col-sm-12"></textarea>
										</div>
									</div>
									<div class="clearfix">
										<button type="submit" id="btnUploadFile"
											class="width-65 pull-right btn btn-sm btn-success">
											<span class="bigger-110"> Update </span> <i
												class="ace-icon fa fa-arrow-right icon-on-right"></i>
										</button>
									</div>									
								</div>
							<div class="space-14"></div>	
							<div id="pictures" class="tab-pane col-sm-4 " th:if="${minutesDetailVal.fileLocationUrl != null}">
											<ul class="ace-thumbnails">
												<li>
													<a th:href="@{'/file/'+${minutesDetailVal.fileLocationUrl}}"
														data-rel="colorbox">
														<img alt="Image file"
															th:src="@{'/file/'+${minutesDetailVal.fileLocationUrl}}"
															width="350" />
														<div class="text"><i class="ace-icon fa fa-search-plus"></i>
															<div class="inner">
																Click</div>
														</div>
													</a>
												</li>
											</ul>
											<span  th:text="${minutesDetailVal?.fileLocationUrl}" class="badge badge-pink label-lg"></span>
										</div>
								
								
							</form>
						</div>
					</div>
				</div>
		</div>                     
<!-- basic scripts -->
	<th:block layout:fragment="scripts">
			
	 <script th:inline="javascript">
		/*<![CDATA[*/
		var categoryVal = /*[[${minutesDetailVal.category}]]*/ 'category';
		var branchNameType = /*[[${minutesDetailVal.branchName}]]*/ 'branchName';
		var fiscalYearVal = /*[[${minutesDetailVal.fiscalYear}]]*/ 'fiscalYear';
		/*]]>*/
		function setSelectedIndex(s, v) {
		    for ( var i = 0; i < s.options.length; i++ ) {
		        if ( s.options[i].value == v ) {
		            s.options[i].selected = true;
		            break;
		        }
		    }
		    return;
		}
		setSelectedIndex(document.getElementById('idCategory'),categoryVal);
		setSelectedIndex(document.getElementById('idBranchName'),branchNameType);
		setSelectedIndex(document.getElementById('idFiscalYear'),fiscalYearVal);
	</script>
	

	<script>
			autosize(document.querySelectorAll('textarea'));
	</script>
	
	<script type="text/javascript">
			$('.chosen-select').chosen();
			$(window).off('resize.chosen').on('resize.chosen', function() {
				$('.chosen-select').each(function() {
					var $this = $(this);
					$this.next().css({
						minWidth : '380px'
					});
				})
			}).trigger('resize.chosen');
	</script>

	<script>
	$('#date-timepicker1').datepicker({
		autoclose: true,
		todayHighlight: true
	})
	//show datepicker when clicking on the icon
	.next().on(ace.click_event, function(){
		$(this).prev().focus();
	});
	

			$('#customFile').ace_file_input({
				style : 'well',
				btn_choose : 'Drop files here or click to choose',
				btn_change : null,
				no_icon : 'ace-icon fa fa-cloud-upload',
				droppable : true,
				thumbnail : 'fit'//large | fit
				,
				preview_error : function(filename, error_code) {
				}

			}).on('change', function() {
			});
		</script>
		
				<script type="text/javascript">
			jQuery(function ($) {
				var $overflow = '';
				var colorbox_params = {
					rel: 'colorbox',
					reposition: true,
					scalePhotos: true,
					scrolling: false,
					previous: '<i class="ace-icon fa fa-arrow-left"></i>',
					next: '<i class="ace-icon fa fa-arrow-right"></i>',
					close: '&times;',
					current: '{current} of {total}',
					maxWidth: '100%',
					maxHeight: '100%',
					onOpen: function () {
						$overflow = document.body.style.overflow;
						document.body.style.overflow = 'hidden';
					},
					onClosed: function () {
						document.body.style.overflow = $overflow;
					},
					onComplete: function () {
						$.colorbox.resize();
					}
				};

				$('.ace-thumbnails [data-rel="colorbox"]').colorbox(
					colorbox_params);
				$("#cboxLoadingGraphic")
					.html(
						"<i class='ace-icon fa fa-spinner orange fa-spin'></i>");//let's add a custom loading icon

				$(document).one('ajaxloadstart.page', function (e) {
					$('#colorbox, #cboxOverlay').remove();
				});
			})
		</script>
	</th:block>
</body>
</html>
